import { type RaydiumClmmInstruction } from "./raydium-instruction-parser";
import { type RaydiumClmmPairData, RaydiumUsdTx } from "./raydium-clmm-api";
import { type TokenMeta } from "./jupiter-token-list-api";
import RaydiumDownloader, { RaydiumDownloaderConfig } from "./clmm-downloader";
interface ClmmDbRow {
    [column: string]: number | boolean | string | Array<unknown> | Uint8Array | null;
}
export interface ClmmDbTx extends ClmmDbRow {
    block_time: number;
    signature: string;
    position_address: string;
    owner_address: string;
    pair_address: string;
    base_mint: string;
    base_symbol: string;
    base_decimals: number;
    base_logo: string;
    quote_mint: string;
    quote_symbol: string;
    quote_decimals: number;
    quote_logo: string;
    is_inverted: number;
    position_is_open: number;
    is_opening_transaction: number;
    is_closing_transaction: number;
    price: number;
    fee_amount: number;
    deposit: number;
    withdrawal: number;
    usd_fee_amount: number;
    usd_deposit: number;
    usd_withdrawal: number;
}
export default class ClmmDb {
    private _db;
    private _addInstructionStatement;
    private _addTransferStatement;
    private _addPairStatement;
    private _addTokenStatement;
    private _addUsdYStatement;
    private _addUsdXStatement;
    private _fillMissingUsdStatement;
    private _setOldestSignature;
    private _markCompleteStatement;
    private _getAllTransactions;
    private _downloaders;
    private _saving;
    private _queue;
    delaySave: boolean;
    private constructor();
    static create(data?: ArrayLike<number> | Buffer | null): Promise<ClmmDb>;
    static load(): Promise<ClmmDb>;
    private _init;
    private _createTables;
    private _createStatements;
    private _addInitialData;
    download(config: RaydiumDownloaderConfig): RaydiumDownloader;
    addInstruction(instruction: RaydiumClmmInstruction): Promise<void>;
    addTransfers(instruction: RaydiumClmmInstruction): Promise<void>;
    getPoolForPosition(position_address: string): Promise<string | undefined>;
    addPair(pair: RaydiumClmmPairData): Promise<void>;
    addToken(token: TokenMeta): Promise<void>;
    setOldestSignature($account_address: string, $oldest_block_time: number, $oldest_signature: string): Promise<void>;
    markComplete($account_address: string): Promise<void>;
    isComplete(account_address: string): Promise<boolean>;
    getMissingPools(): Promise<string[]>;
    getMissingTokens(): Promise<string[]>;
    getMissingUsd(): Promise<string[]>;
    getMostRecentSignature(owner_address: string): Promise<string | undefined>;
    getOldestSignature(owner_address: string): Promise<string | undefined>;
    getUsdTransactions(position_address: string): Promise<RaydiumUsdTx[]>;
    addUsdTransactions(position_address: string, usdTxs: RaydiumUsdTx[]): Promise<void>;
    getOwnerTransactions(owner_address: string): Promise<ClmmDbTx[]>;
    cancelDownload(account: string): Promise<void>;
    private _getAll;
    private _queueDbCall;
    private _processQueue;
    save(): Promise<void>;
    private _waitUntilReady;
    waitForSave(): Promise<void>;
}
export {};
